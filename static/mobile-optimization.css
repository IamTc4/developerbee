/* Mobile Optimization & CWV Improvements */

/* 1. Touch Targets: Ensure minimum 48x48px clickable area */
a, button, input[type="submit"], input[type="button"], select, .nav-contact-btn {
    min-height: 48px;
    min-width: 48px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    touch-action: manipulation; /* Improves touch response */
}

/* Adjust links inside text to not break layout but have padding */
p a, li a {
    display: inline-block; /* Allows padding to affect layout */
}

/* Specific fix for island nav links to ensure they are large enough */
.island-nav a {
    padding: 0.75rem 1rem !important; /* Increase padding */
}

/* 2. Visual Stability (CLS): Aspect Ratio Placeholders */
img, video, iframe {
    max-width: 100%;
    height: auto;
    font-style: italic;
    vertical-align: middle;
}

/* 3. Text Rendering */
@font-face {
  font-family: 'Montserrat';
  font-display: swap;
}

/* 4. Fix "Left Oriented" & Grid Overflow Mobile Issues */

@media (max-width: 820px) {
    /* --- NAVIGATION LOGIC RESTORATION --- */
    .hamburger {
        display: flex !important;
        z-index: 1402;
    }

    .island-nav {
        position: fixed !important;
        flex-direction: column !important;
        gap: 0.3em !important;
        align-items: flex-start !important;
        background: rgba(0, 0, 0, 0.95) !important;
        backdrop-filter: blur(12px) !important;
        top: 80px !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        border-radius: 1.3em !important;
        width: 90vw !important;
        max-width: 350px !important;
        box-shadow: 0 8px 40px rgba(0,0,0,0.5) !important;
        padding: 1.5rem !important;
        opacity: 0 !important;
        pointer-events: none !important;
        z-index: 1401 !important;
        transition: opacity 0.23s ease !important;
        border: 1px solid rgba(95, 247, 255, 0.2) !important;
    }

    .island-nav.open {
        opacity: 1 !important;
        pointer-events: auto !important;
    }

    .island-nav li {
        width: 100% !important;
    }

    .island-action {
        /* Hide CTA button in header on mobile if it crowds the logo/hamburger */
        display: none !important;
    }

    /* --- LAYOUT FIXES --- */

    /* Reset Container Constraints & Centering */
    .container, .shell, .content-wrapper,
    .contact-us-content, .about-us-content,
    .page-section, .services-section, .pricing-section {
        width: 100% !important;
        max-width: 100% !important;
        padding-left: 1.25rem !important; /* 20px padding */
        padding-right: 1.25rem !important;
        margin-left: auto !important;
        margin-right: auto !important;
        box-sizing: border-box;
    }

    /* Force Flex Column for Side-by-Side Layouts */
    .contact-us-content,
    .about-us-content,
    .footer-top,
    .footer-bottom,
    .hero-inner {
        display: flex !important;
        flex-direction: column !important;
        gap: 2rem !important;
        align-items: center !important; /* Center content */
    }

    /* Fix Grid Columns causing overflow on small screens */
    .services-grid,
    .pricing-cards-grid,
    .portfolio-grid,
    .category-grid,
    .team-grid,
    .testimonial-grid,
    .client-logos-grid {
        grid-template-columns: 1fr !important; /* Force single column */
        width: 100% !important;
        gap: 1.5rem !important;
        padding: 0 !important;
        display: grid !important;
    }

    /* Tools Grid Fix - Keep as Grid but adjust columns */
    .tool-logos-grid {
        display: grid !important;
        grid-template-columns: repeat(3, 1fr) !important; /* 3 cols for logos */
        gap: 1.5rem !important;
        justify-items: center !important;
        align-items: center !important;
        width: 100% !important;
        margin-top: 1rem !important;
    }

    .tool-logos-grid img {
        max-width: 100% !important;
        height: auto !important;
        max-height: 60px !important; /* Constrain height */
        object-fit: contain !important;
    }

    /* Ensure cards take full width but respect padding */
    .service-card,
    .pricing-card,
    .project-card,
    .category-card {
        width: 100% !important;
        min-width: 0 !important; /* Allow shrinking below min-content */
        margin: 0 !important;
        box-sizing: border-box;
    }

    /* Fix Contact Form Overflow */
    .contact-form-container,
    .contact-info-container {
        width: 100% !important;
        max-width: 100% !important;
    }

    /* Fix "Shrunken" Hero */
    .hero {
        margin-top: 20px !important; /* Reduce top margin */
        padding: 6rem 1rem 2rem 1rem !important; /* Add top padding for header clearance */
        width: 100% !important;
        box-sizing: border-box;
    }

    /* Pricing Page Specific Fix for Header Overlap */
    .pricing-section {
        padding-top: 180px !important; /* Clear fixed header aggressively */
        margin-top: 0 !important;
    }

    .pricing-hero {
        margin-top: 20px !important;
    }

    /* Services Page Header Clearance */
    .services-section {
        padding-top: 100px !important; /* Ensure generic padding */
    }

    /* Adjust Headers */
    h1 {
        font-size: 2.2rem !important; /* Prevent massive text */
        line-height: 1.2 !important;
        word-wrap: break-word; /* Prevent overflow */
    }

    .section-title {
        font-size: 2rem !important;
        text-align: center !important; /* Center titles on mobile */
    }

    /* Center text in cards for better mobile balance */
    .pricing-card, .service-card {
        text-align: center !important;
    }
    .pricing-card ul, .service-card ul {
        text-align: left !important; /* Keep lists readable */
        display: inline-block;
    }
}

/* 5. Very Small Screen Optimizations (iPhone SE / 320px) */
@media (max-width: 400px) {
    /* Ensure Logo and Hamburger fit */
    .island-header {
        padding: 0.5rem 0.8rem !important;
        justify-content: space-between !important;
        width: 95vw !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        min-width: 0 !important;
    }

    .island-logo {
        font-size: 1.1rem !important;
    }

    /* Fix Pricing Card padding */
    .pricing-card {
        padding: 1.5rem 1rem !important;
    }

    .pricing-main .section-title {
        font-size: 1.8rem !important;
    }

    .tool-logos-grid {
        grid-template-columns: repeat(2, 1fr) !important; /* Reduce to 2 cols for very small screens */
    }
}

/* 6. Fix Form Visibility on Contact Page */
.contact-form {
    width: 100%;
    box-sizing: border-box;
    overflow: hidden; /* Prevent spillover */
}

/* Optimize Interaction to Next Paint (INP) */
* {
    /* Avoid heavy layout trashing on scroll if possible */
}
